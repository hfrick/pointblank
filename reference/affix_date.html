<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function helps to affix the current date to a filename. This is useful
when writing agent and/or informant objects to disk as part of a
continuous process. The date can be in terms of UTC time or the local system
time. The date can be affixed either to the end of the filename (before the
file extension) or at the beginning with a customizable delimiter.
The x_write_disk(), yaml_write() functions allow for the writing of
pointblank objects to disk. Furthermore the log4r_step() function has
the append_to argument that accepts filenames, and, it's reasonable that a
series of log files could be differentiated by a date component in the naming
scheme. The modification of the filename string takes effect immediately but
not at the time of writing a file to disk. In most cases, especially when
using affix_date() with the aforementioned file-writing functions, the file
timestamps should approximate the time components affixed to the filenames."><title>Put the current date into a file name — affix_date • pointblank</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Put the current date into a file name — affix_date"><meta property="og:description" content="This function helps to affix the current date to a filename. This is useful
when writing agent and/or informant objects to disk as part of a
continuous process. The date can be in terms of UTC time or the local system
time. The date can be affixed either to the end of the filename (before the
file extension) or at the beginning with a customizable delimiter.
The x_write_disk(), yaml_write() functions allow for the writing of
pointblank objects to disk. Furthermore the log4r_step() function has
the append_to argument that accepts filenames, and, it's reasonable that a
series of log files could be differentiated by a date component in the naming
scheme. The modification of the filename string takes effect immediately but
not at the time of writing a file to disk. In most cases, especially when
using affix_date() with the aforementioned file-writing functions, the file
timestamps should approximate the time components affixed to the filenames."><meta property="og:image" content="https://rstudio.github.io/pointblank/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pointblank</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.12.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Validation Workflows</h6>
    <a class="dropdown-item" href="../articles/validation_workflows.html">Overview</a>
    <a class="dropdown-item" href="../articles/VALID-I.html">VALID-I: Data Quality Reporting</a>
    <a class="dropdown-item" href="../articles/VALID-II.html">VALID-II: Pipeline Data Validation</a>
    <a class="dropdown-item" href="../articles/VALID-III.html">VALID-III: Expectations in Unit Tests</a>
    <a class="dropdown-item" href="../articles/VALID-IV.html">VALID-IV: Data Tests for Conditionals</a>
    <a class="dropdown-item" href="../articles/VALID-V.html">VALID-V: Table Scan</a>
    <a class="dropdown-item" href="../articles/VALID-VI.html">VALID-VI: R Markdown Document Validation</a>
    <h6 class="dropdown-header" data-toc-skip>Information Management</h6>
    <a class="dropdown-item" href="../articles/INFO-1.html">Intro to Information Management</a>
    <a class="dropdown-item" href="../articles/INFO-2.html">Advanced Information Management</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rstudio/pointblank/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Put the current date into a file name</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/pointblank/blob/HEAD/R/file_naming.R" class="external-link"><code>R/file_naming.R</code></a></small>
      <div class="d-none name"><code>affix_date.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function helps to affix the current date to a filename. This is useful
when writing <em>agent</em> and/or <em>informant</em> objects to disk as part of a
continuous process. The date can be in terms of UTC time or the local system
time. The date can be affixed either to the end of the filename (before the
file extension) or at the beginning with a customizable delimiter.</p>
<p>The <code><a href="x_write_disk.html">x_write_disk()</a></code>, <code><a href="yaml_write.html">yaml_write()</a></code> functions allow for the writing of
<strong>pointblank</strong> objects to disk. Furthermore the <code><a href="log4r_step.html">log4r_step()</a></code> function has
the <code>append_to</code> argument that accepts filenames, and, it's reasonable that a
series of log files could be differentiated by a date component in the naming
scheme. The modification of the filename string takes effect immediately but
not at the time of writing a file to disk. In most cases, especially when
using <code>affix_date()</code> with the aforementioned file-writing functions, the file
timestamps should approximate the time components affixed to the filenames.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">affix_date</span><span class="op">(</span></span>
<span>  <span class="va">filename</span>,</span>
<span>  position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"end"</span>, <span class="st">"start"</span><span class="op">)</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"%Y-%m-%d"</span>,</span>
<span>  delimiter <span class="op">=</span> <span class="st">"_"</span>,</span>
<span>  utc_time <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>filename</dt>
<dd><p>The filename to modify.</p></dd>


<dt>position</dt>
<dd><p>Where to place the formatted date. This could either be at
the <code>"end"</code> of the filename (the default) or at the <code>"start"</code>.</p></dd>


<dt>format</dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/strptime.html" class="external-link">base::strptime()</a></code> format string for formatting the date. By
default, this is <code>"%Y-%m-%d"</code> which expresses the date according to the ISO
8601 standard (as <code>YYYY-MM-DD</code>). Refer to the documentation on
<code><a href="https://rdrr.io/r/base/strptime.html" class="external-link">base::strptime()</a></code> for conversion specifications if planning to use a
different format string.</p></dd>


<dt>delimiter</dt>
<dd><p>The delimiter characters to use for separating the date
string from the original file name.</p></dd>


<dt>utc_time</dt>
<dd><p>An option for whether to use the current UTC time to
establish the date (the default, with <code>TRUE</code>), or, use the system's local
time (<code>FALSE</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A character vector.</p>
    </div>
    <div class="section level2">
    <h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h2>
    

<div class="section">
<h3 id="the-basics-of-creating-a-filename-with-the-current-date">The basics of creating a filename with the current date<a class="anchor" aria-label="anchor" href="#the-basics-of-creating-a-filename-with-the-current-date"></a></h3>


<p>Taking the generic <code>"pb_file"</code> name for a file, we add the current date to it
as a suffix.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/affix_date.html">affix_date</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"pb_file"</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## [1] "pb_file_2022-04-01"</span></span></code></pre><p></p></div>
<p>File extensions won't get in the way:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/affix_date.html">affix_date</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"pb_file.rds"</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## [1] "pb_file_2022-04-01.rds"</span></span></code></pre><p></p></div>
<p>The date can be used as a prefix.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/affix_date.html">affix_date</a></span><span class="op">(</span></span>
<span>  filename <span class="op">=</span> <span class="st">"pb_file"</span>,</span>
<span>  position <span class="op">=</span> <span class="st">"start"</span></span>
<span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## [1] "2022-04-01_pb_file"</span></span></code></pre><p></p></div>
<p>The date pattern can be changed and so can the delimiter.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/affix_date.html">affix_date</a></span><span class="op">(</span></span>
<span>  filename <span class="op">=</span> <span class="st">"pb_file.yml"</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"%Y%m%d"</span>,</span>
<span>  delimiter <span class="op">=</span> <span class="st">"-"</span></span>
<span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## [1] "pb_file-20220401.yml"</span></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="using-a-date-based-filename-in-a-pointblank-workflow">Using a date-based filename in a <strong>pointblank</strong> workflow<a class="anchor" aria-label="anchor" href="#using-a-date-based-filename-in-a-pointblank-workflow"></a></h3>


<p>We can use a file-naming convention involving dates when writing output files
immediately after interrogating. This is just one example (any workflow
involving a <code>filename</code> argument is applicable). It's really advantageous to
use date-based filenames when interrogating directly from YAML in a scheduled
process.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/yaml_agent_interrogate.html">yaml_agent_interrogate</a></span><span class="op">(</span></span>
<span>  filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>    <span class="st">"yaml"</span>, <span class="st">"agent-small_table.yml"</span>,</span>
<span>    package <span class="op">=</span> <span class="st">"pointblank"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/x_write_disk.html">x_write_disk</a></span><span class="op">(</span></span>
<span>    filename <span class="op">=</span> <span class="fu"><a href="../reference/affix_date.html">affix_date</a></span><span class="op">(</span></span>
<span>      filename <span class="op">=</span> <span class="st">"small_table_agent.rds"</span>,</span>
<span>      delimiter <span class="op">=</span> <span class="st">"-"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    keep_tbl <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    keep_extracts <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre><p></p></div>
<p>In the above, we used the written-to-disk agent (The
<code>"agent-small_table.yml"</code> YAML file) for an interrogation via
<code><a href="yaml_agent_interrogate.html">yaml_agent_interrogate()</a></code>. Then, the results were written to disk as an RDS
file. In the <code>filename</code> argument of <code><a href="x_write_disk.html">x_write_disk()</a></code>, the <code>affix_date()</code>
function was used to ensure that a daily run would produce a file whose name
indicates the day of execution.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="function-id">Function ID<a class="anchor" aria-label="anchor" href="#function-id"></a></h2>
    

<p>13-3</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>The <code><a href="affix_datetime.html">affix_datetime()</a></code> function provides the same features except it
produces a datetime string by default.</p>
<p>Other Utility and Helper Functions: 
<code><a href="affix_datetime.html">affix_datetime</a>()</code>,
<code><a href="col_schema.html">col_schema</a>()</code>,
<code><a href="from_github.html">from_github</a>()</code>,
<code><a href="has_columns.html">has_columns</a>()</code>,
<code><a href="stop_if_not.html">stop_if_not</a>()</code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Richard Iannone, Mauricio Vargas, June Choe.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

